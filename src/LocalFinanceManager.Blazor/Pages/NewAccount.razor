@page "/accounts/new"
@inject LocalFinanceManager.Blazor.Services.AccountService AccountsApi

<h3>New Account</h3>

<form onsubmit="return false">
    <div>
        <label>Label</label>
        <input @bind="model.Label" />
    </div>
    <div>
        <label>IBAN</label>
        <input @bind="model.IBAN" />
    </div>
    <div>
        <label>Currency</label>
        <input @bind="model.Currency" />
    </div>
    <div>
        <label>Starting Balance</label>
        <input type="number" step="0.01" @bind="model.StartingBalance" />
    </div>
    <button type="button" class="btn btn-primary" @onclick="Save">Create</button>
</form>

@code {
    private CreateAccountDto model = new();

    async System.Threading.Tasks.Task Save()
    {
        var ok = await AccountsApi.CreateAsync(model);
        if (ok) NavigationManager.NavigateTo("/accounts");
    }

    [Microsoft.AspNetCore.Components.Inject]
    public Microsoft.AspNetCore.Components.NavigationManager NavigationManager { get; set; } = null!;

    
}
